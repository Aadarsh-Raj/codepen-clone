import React, { useEffect, useState } from "react";
import "./Style/languageeditor.css"
import CodeMirror from "@uiw/react-codemirror"
import {javascript} from "@codemirror/lang-javascript"
import { UserFunction } from "../Context/UserContext";
const LanguageEditor = (props) => {
const [svg, setSvg] = useState("");
const userCtx = UserFunction();


const updateLanguageEditorValue =  (value, viewUpdate) =>( props.callUpdateFunction(value,viewUpdate));



useEffect(()=>{
    if(props.languageTitle == "HTML"){
setSvg(<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 32 32" viewBox="0 0 32 32" id="html"><path fill="#FFE6E2" d="M26,32H6c-3.314,0-6-2.686-6-6V6c0-3.314,2.686-6,6-6h20c3.314,0,6,2.686,6,6v20C32,29.314,29.314,32,26,32z"></path><path fill="#FFE6E2" d="M26,32H6c-3.314,0-6-2.686-6-6V6c0-3.314,2.686-6,6-6h20c3.314,0,6,2.686,6,6v20C32,29.314,29.314,32,26,32z"></path><path fill="#FC573B" d="M21.592,22.136L22.834,8H9.167H9.166l1.242,14.136L15.982,24L21.592,22.136z M12.468,19.632l-0.213-2.707h1.698l0.125,1.361l1.904,0.518l1.911-0.518l0.213-2.222h-5.94l-0.456-5.2h8.581l-0.156,1.704h-6.541l0.146,1.765h6.249l-0.484,5.3l-3.484,0.965v0.011h-0.039L12.468,19.632z"></path></svg>);

    }else if(props.languageTitle == "CSS"){
        setSvg(<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="css"><path fill="#2196F3" d="m1 0 1.275 14.4L8 16l5.723-1.599L15 0z"></path><path fill="#FAFAFA" d="m12.274 4.709-.161 1.809-.486 5.423L8 12.944l-.003.001-3.625-1.004-.253-2.836h1.776l.132 1.471 1.971.532.001-.001 1.974-.532.269-2.451-6.208.017-.176-1.676 6.533-.077.132-1.794-6.84.019-.115-1.669h8.864z"></path></svg>);

    }else if(props.languageTitle == "JS"){
setSvg(<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" id="js"><path fill="yellow" d="M.384.67v31.296H31.68V.67H.384zm16.334 26.772c-.461.937-1.342 1.553-2.362 1.85-1.568.36-3.067.155-4.183-.515-.747-.458-1.33-1.163-1.725-1.975.794-.485 1.586-.973 2.38-1.458.021.009.083.122.167.268.303.509.565.869 1.08 1.121.506.172 1.615.283 2.044-.607.262-.452.178-1.936.178-3.545 0-2.529.012-5.016.012-7.576h2.927c0 2.688.015 5.383 0 8.067.006 1.645.149 3.14-.518 4.369zm12.144-.827c-1.017 3.481-6.691 3.594-8.957 1.294-.479-.541-.779-.824-1.065-1.449 1.205-.693 1.205-.693 2.377-1.371.637.979 1.226 1.517 2.285 1.737 1.437.175 2.883-.318 2.559-1.844-.333-1.247-2.942-1.55-4.718-2.883-1.803-1.211-2.225-4.153-.744-5.834.494-.622 1.336-1.086 2.219-1.309l.922-.119c1.77-.036 2.877.431 3.689 1.339.226.229.41.476.756 1.012-.943.601-.94.595-2.291 1.47-.289-.622-.767-1.012-1.273-1.181-.785-.238-1.776.021-1.981.851-.071.256-.056.494.057.916.318.726 1.386 1.041 2.344 1.481 2.758 1.119 3.689 2.317 3.918 3.745.22 1.229-.054 2.026-.095 2.145z"></path></svg>);

    }
},[]);

  return (
    <>
      <div className="language-editor">
        <div className="editor-header">
            <div className="language-heading">
              {svg} {props.languageTitle}
            </div>
            <div className="editor-functions">
                <button><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="setting"><g fill="#200E32" transform="translate(2.5 2)"><path d="M17.9783447,11.715509 L17.9783447,11.715509 C17.031972,11.1676705 16.7044443,9.98616809 17.2391134,9.04885293 C17.4146383,8.74622209 17.6698063,8.49462506 17.9783447,8.31996694 L17.9783447,8.31996694 C18.4473064,8.05765887 18.7897963,7.62434465 18.9302036,7.11568641 C19.0706109,6.60702817 18.9973888,6.06485678 18.7267024,5.6088666 L18.7267024,5.6088666 L18.0604816,4.44442678 C17.7911661,3.98766717 17.3462762,3.65408853 16.8240295,3.51733451 C16.3017829,3.38058049 15.7451277,3.45189743 15.2769561,3.71554079 L15.2769561,3.71554079 C14.8073941,3.97959895 14.2493617,4.05115207 13.7256315,3.91445776 C13.2019013,3.77776345 12.7553792,3.4440202 12.4843043,2.9866548 C12.3068678,2.68317478 12.2125824,2.34033484 12.210515,1.9911032 L12.210515,1.9911032 C12.2129425,1.46384885 11.9995958,0.957378304 11.6176644,0.583716293 C11.235733,0.210054283 10.7166922,0 10.1753472,0 L8.83377915,0 C7.70830116,0 6.79450951,0.886031318 6.78948505,1.98221435 C6.79330713,2.6931594 6.40591794,3.35165041 5.77424527,3.70793694 C5.14257259,4.06422348 4.36336968,4.06373315 3.73217021,3.70665194 L3.73217021,3.70665194 C3.25968018,3.43228011 2.69327806,3.35588524 2.16201647,3.49487359 C1.63075488,3.63386195 1.17988631,3.97639461 0.912139501,4.44442678 L0.912139501,4.44442678 L0.273297594,5.56442233 C-0.285071865,6.51480763 0.0492538645,7.72598064 1.02165526,8.27552267 L1.02165526,8.27552267 C1.99620802,8.82836189 2.3269886,10.0454634 1.76088661,10.9955119 C1.58774231,11.2975959 1.3318093,11.5468698 1.02165526,11.715509 L1.02165526,11.715509 C0.552693636,11.9778171 0.21020368,12.4111313 0.0697963744,12.9197895 C-0.0706109308,13.4284478 0.00261118755,13.9706192 0.273297594,14.4266093 L0.273297594,14.4266093 L0.912139501,15.5643826 C1.47974743,16.5135783 2.72936296,16.8357522 3.70479127,16.2843797 L3.70479127,16.2843797 C4.68124592,15.7457106 5.92084252,16.0703078 6.48831672,17.0132657 C6.66892498,17.3154685 6.76344118,17.6591478 6.76210611,18.0088173 L6.76210611,18.0088173 C6.76208437,18.5399854 6.9799685,19.0491432 7.3673048,19.4230627 C7.7546411,19.7969823 8.27931673,20.0046631 8.82465284,20 L10.1662208,20 C11.2952533,20 12.210515,19.1084733 12.210515,18.0088173 L12.210515,18.0088173 C12.2031893,17.4784963 12.4143698,16.9674345 12.7968347,16.5899097 C13.1792996,16.2123848 13.7011453,15.9998884 14.2456827,15.9999364 C14.6048086,15.997767 14.9579002,16.0898842 15.2678298,16.266602 L15.2678298,16.266602 C16.243604,16.8104432 17.4871326,16.4848163 18.0513552,15.537716 L18.7267024,14.3999428 C19.2719473,13.4562499 18.9387454,12.2610214 17.9783447,11.715509 Z" opacity=".4"></path><circle cx="9.5" cy="10" r="2.5"></circle></g></svg></button>



                <button><svg viewBox="-122.9 121.1 105.9 61.9" fill="white">
          <path d="m-63.2 180.3 43.5-43.5c1.7-1.7 2.7-4 2.7-6.5s-1-4.8-2.7-6.5c-1.7-1.7-4-2.7-6.5-2.7s-4.8 1-6.5 2.7L-69.9 161l-37.2-37.2c-1.7-1.7-4-2.7-6.5-2.7s-4.8 1-6.5 2.6c-1.9 1.8-2.8 4.2-2.8 6.6 0 2.3.9 4.6 2.6 6.5 11.4 11.5 41 41.2 43 43.3l.2.2c3.6 3.6 10.3 3.6 13.9 0z"></path>
        </svg></button>
            </div>
        </div>
        <div className="editor-body">
        <CodeMirror value={props.languageTitle === "HTML" ? userCtx.htmlValue : props.languageTitle === "CSS" ? userCtx.cssValue : userCtx.jsValue} height="100%" theme={"dark"} extensions={[javascript({ jsx: true })]} onChange={(value, viewUpdate)=>{updateLanguageEditorValue(props.languageTitle, value)}} />
        </div>
      </div>
    </>
  );
};

export default LanguageEditor;
